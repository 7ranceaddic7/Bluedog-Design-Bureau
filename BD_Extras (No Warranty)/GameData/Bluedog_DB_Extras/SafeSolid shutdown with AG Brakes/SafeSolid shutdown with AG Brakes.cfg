// Adds the action group "Brakes" to all solid fuel engines with the SafeSolid™ system, allows it to shutdown the engine quickly by pressing "B" (default keybinding for "Brakes")

// already existing with index 0, so add another ModuleBdbDefAGHelper with index 1
@PART]bluedog*]:HAS[#description[*SafeSolid*],@MODULE[ModuleBdbDefAGHelper]:HAS[~actionModuleIndex[1]],@MODULE[ModuleEngines*]:HAS[#allowShutdown[?rue],@PROPELLANT[SolidFuel]]]:AFTER[zzzBluedog_DB]
{
	// ModuleEngines
	@MODULE[ModuleEngines]:HAS[#allowShutdown[?rue],@PROPELLANT[SolidFuel]]
	{
		MODULE
		{
			name = ModuleBdbDefAGHelper
			actionModuleName = ModuleEngines
			actionModuleIndex = 1
			actionName = ShutdownEngine
			actionDefaultActionGroup = Brakes
		}
	}
	// ModuleEnginesFX
	@MODULE[ModuleEnginesFX]:HAS[#allowShutdown[?rue],@PROPELLANT[SolidFuel]]
	{
		MODULE
		{
			name = ModuleBdbDefAGHelper
			actionModuleName = ModuleEnginesFX
			actionModuleIndex = 1
			actionName = ShutdownEngine
			actionDefaultActionGroup = Brakes
		}
	}
}

// not existing yet, so add the ModuleBdbDefAGHelper with index 0
@PART]bluedog*]:HAS[#description[*SafeSolid*],!MODULE[ModuleBdbDefAGHelper],@MODULE[ModuleEngines*]:HAS[#allowShutdown[?rue],@PROPELLANT[SolidFuel]]]:AFTER[zzzBluedog_DB]
{
	// ModuleEngines
	@MODULE[ModuleEngines]:HAS[#allowShutdown[?rue],@PROPELLANT[SolidFuel]]
	{
		MODULE
		{
			name = ModuleBdbDefAGHelper
			actionModuleName = ModuleEngines
			actionModuleIndex = 0
			actionName = ShutdownEngine
			actionDefaultActionGroup = Brakes
		}
	}
	// ModuleEnginesFX
	@MODULE[ModuleEnginesFX]:HAS[#allowShutdown[?rue],@PROPELLANT[SolidFuel]]
	{
		MODULE
		{
			name = ModuleBdbDefAGHelper
			actionModuleName = ModuleEnginesFX
			actionModuleIndex = 0
			actionName = ShutdownEngine
			actionDefaultActionGroup = Brakes
		}
	}
}
